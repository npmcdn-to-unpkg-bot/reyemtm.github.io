<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<head>
<title>Map Remove Test Map | getBounds</title>
<!--fonts and jquery-->
<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400italic,400,800,700' rel='stylesheet' type='text/css'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<!--Font Awesome CDN and Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
<!--Mapping via LeafletJS updated 03-13-2015 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js"></script>
<!--leaflet sleep updated Jan 2016 -->
<script src="https://getbounds.com/assets/leaflet-sleep/Leaflet.Sleep.js"></script>
<!--Home Button ie Default Extent-->
<link rel="stylesheet" href="https://getbounds.com/assets/leaflet-defaultextent/leaflet.defaultextent.css" />
<script src="https://getbounds.com/assets/leaflet-defaultextent/leaflet.defaultextent.js"></script>
<!--locate control from source -->
<link rel="stylesheet" href="https://getbounds.com/assets/leaflet-locate-control/L.Control.Locate.min.css" />
<script src="https://getbounds.com/assets/leaflet-locate-control/L.Control.Locate.min.js"></script>
<!--Leaflet Hash via Mapbox CDN-->
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-hash/v0.2.1/leaflet-hash.js'></script>
<!--Google Custom Map -->
<script src="https://maps.google.com/maps/api/js?v=3"></script>
<!-- Leaflet Omnivore Plugin GeoJson KML Etc -->
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
<!-- leaflet search -->
<link rel="stylesheet" href="https://getbounds.com/assets/leaflet-search/leaflet-search.min.css" />
<script src="https://getbounds.com/assets/leaflet-search/leaflet-search.src.js"></script>
<!--minimap-->
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.js'></script>
<!-- Leaflet Easy button Updated Dec 2015-->
<link rel="stylesheet" href="https://getbounds.com/assets/easy-button/easy-button.css" />
<script src="https://getbounds.com/assets/easy-button/easy-button.js"></script>
<!--Leaflet sidebar v1 aka menu -->
<link rel="stylesheet" href="https://getbounds.com/assets/leaflet-sidebar/L.Control.Sidebar.css" />
<script src="https://getbounds.com/assets/leaflet-sidebar/L.Control.Sidebar.js"></script>
<!-- leaflet loading and leaflet-spin works with leaflet ajax and map tiles -->
<link rel="stylesheet" href="https://getbounds.com/assets/leaflet-loading/Control.Loading.css" />
<script src="https://getbounds.com/assets/leaflet-loading/Control.Loading.js"></script>
<script src="https://getbounds.com/assets/leaflet-spin/spin.js"></script>
<script src="https://getbounds.com/assets/leaflet-spin/leaflet.spin.js"></script>
<script src="https://getbounds.com/assets/google-tiles/google.js"></script>
<script src="https://getbounds.com/assets/google-tiles/gglegrey.js"></script>
<!--Mapbox fullscreen standalone js added in ovrdc-toolbar-->
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
<!--OVRDC Custom Styles-->
<link rel="stylesheet" href="https://www.ovrdc.org/apps/assets/ovrdc-css/ovrdc-style.css" />
<link rel="stylesheet" href="https://www.ovrdc.org/apps/assets/ovrdc-css/modern-ui.css" />
<script src="https://getbounds.com/assets/geojson-tiles/geojson-vt-dev.js"></script>
<script src="https://getbounds.com/assets/geojson-tiles/L.CanvasTiles.js"></script>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-pip/v0.1.0/leaflet-pip.min.js'></script>
<style>*{font-family: "Open Sans", sans-serif;}</style>
</head>
<body>
<div id='parcelmap'>
<div id="sidebar"><div class="list-group" style="text-align:left;"> <hr> <h4>Filter by Township of City</h4> <hr><button id="lancaster" type="button" class="twpselect btn btn-default btn-lg btn-block">City of Lancaster</button> <button id="amanda" type="button" class="twpselect btn btn-default btn-lg btn-block">Amanda Township</button> <button id="berne" type="button" class="twpselect btn btn-default btn-lg btn-block">Berne Township</button> <button id="bloom" type="button" class="twpselect btn btn-default btn-lg btn-block">Bloom Township</button> <button id="clearcreek" type="button" class="twpselect btn btn-default btn-lg btn-block">Clearcreek Township</button> <button id="greenfield" type="button" class="twpselect btn btn-default btn-lg btn-block">Greenfield Township</button> <button id="hocking" type="button" class="twpselect btn btn-default btn-lg btn-block">Hocking Township</button> <button id="liberty" type="button" class="twpselect btn btn-default btn-lg btn-block">Liberty Township</button> <button id="madison" type="button" class="twpselect btn btn-default btn-lg btn-block">Madison Township</button> <button id="pleasant" type="button" class="twpselect btn btn-default btn-lg btn-block">Pleasant Township</button> <button id="richland" type="button" class="twpselect btn btn-default btn-lg btn-block">Richland Township</button> <button id="rushcreek" type="button" class="twpselect btn btn-default btn-lg btn-block">Rush Creek Township</button> <button id="violet" type="button" class="twpselect btn btn-default btn-lg btn-block">Violet Township</button> <button id="walnut" type="button" class="twpselect btn btn-default btn-lg btn-block">Walnut Township</button> <hr> <li id="test" class="list-group-item"><i class="fa fa-bars fa-fw fa-lg"></i> Open Sidebar</li> <li class="list-group-item"><i class="fa fa-exchange fa-fw fa-lg"></i> Toggle Address Search</li> <li class="list-group-item"><img src="https://www.ovrdc.org/apps/assets/images/fullscreen-img.png" style="padding:0 1px;width:22px;" /> Fullscreen</li> <li class="list-group-item"><i class="fa fa-globe fa-fw fa-lg"></i> Default Map Extent</li> <li class="list-group-item"><i class="fa fa-map-marker fa-fw fa-lg"></i> Show/Follow Your Location</li> <li class="list-group-item"><i class="fa fa-cogs fa-fw fa-lg"></i> Toggle Map Tools (Mobile Only)</li> <li class="list-group-item"><img src="https://getbounds.com/assets/images/layers-bl.png" style="padding:0 1px;width:22px;" /> Toggle Map Layers</li> <hr> <h6>Pinch & zoom disabled. Use zoom controls.</h6> </div></div> <div id="map"></div>
</div>
<script>
var loaded = false;
var tilename;

function makeMap() {

alert('make map fired');

console.log('make map fired');

var map = L.map('map', {
	zoomControl: false,
	maxZoom: 18,
	minZoom: 11,
	touchZoom: false,
	center: [39.7216,-82.6038],
	zoom: 11	
});

alert(tilename);//--//

var customZoom = L.control.zoom({position:'topleft'}).addTo(map);

var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
   maxNativeZoom:19,
   maxZoom: 22,
   attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
 }).addTo(map);

var basemaps = {
  "Streets": osm
};

var overlays;
var sidebar = L.control.sidebar('sidebar', { autoPan: false, closeButton: false });
sidebar.addTo(map);
var sidebarToggle = L.easyButton({
      states: [{
              stateName: 'open-sidebar',   // name the state
              icon:      'fa-bars fa-lg',          // and define it's properties
              title:     'Show Sidebar', // like it's title
              onClick: function(btn, map) {  // and it's callback
                  sidebar.show();
                  btn.state('close-sidebar'); // change state on click!
              }
          }, {
              stateName: 'close-sidebar',
              icon:      'fa-times fa-lg fa-2x',
              title:     'Hide Sidebar',
              onClick: function(btn, map) {
                  sidebar.hide();
                  btn.state('open-sidebar');
              }
      }],
  	id: 'menu'
});

var stogglebar = L.easyBar([sidebarToggle], {id: 'toggle'}).addTo(map);

sidebar.on('hide', function () {
    sidebarToggle.state('open-sidebar');
});

sidebar.on('show', function () {
    sidebarToggle.state('close-sidebar');
});

sidebar.on('show', function() {
	map.removeControl(customZoom)
});

sidebar.on('hide', function() {
	customZoom.addTo(map);
});

var ffParcels = L.geoJson(null, {
  onEachFeature: function(feature, layer) {
    layer.bindPopup(feature.properties.owner)
  }
}).addTo(map);

var url = 'https://getbounds.com/data/topojson/';

var fullurl = url + tilename;

console.log(fullurl);

var tileData = omnivore.topojson(fullurl, null, ffParcels);

tileData.on('ready', function() {
	$(".blank").fadeOut();
	alert('parcel data ready');
	console.log('parcel data ready');
});

var maptext = '<div id="sidebar"> <div class="list-group" style="text-align:left;"> <hr> <h4>Filter by Township of City</h4> <hr> <div id="twpselect"><button id="lancaster" type="button" class="twpselect btn btn-default btn-lg btn-block">City of Lancaster</button> <button id="amanda" type="button" class="twpselect btn btn-default btn-lg btn-block">Amanda Township</button> <button id="berne" type="button" class="twpselect btn btn-default btn-lg btn-block">Berne Township</button> <button id="bloom" type="button" class="twpselect btn btn-default btn-lg btn-block">Bloom Township</button> <button id="clearcreek" type="button" class="twpselect btn btn-default btn-lg btn-block">Clearcreek Township</button> <button id="greenfield" type="button" class="twpselect btn btn-default btn-lg btn-block">Greenfield Township</button> <button id="hocking" type="button" class="twpselect btn btn-default btn-lg btn-block">Hocking Township</button> <button id="liberty" type="button" class="twpselect btn btn-default btn-lg btn-block">Liberty Township</button> <button id="madison" type="button" class="twpselect btn btn-default btn-lg btn-block">Madison Township</button> <button id="pleasant" type="button" class="twpselect btn btn-default btn-lg btn-block">Pleasant Township</button> <button id="richland" type="button" class="twpselect btn btn-default btn-lg btn-block">Richland Township</button> <button id="rushcreek" type="button" class="twpselect btn btn-default btn-lg btn-block">Rush Creek Township</button> <button id="violet" type="button" class="twpselect btn btn-default btn-lg btn-block">Violet Township</button> <button id="walnut" type="button" class="twpselect btn btn-default btn-lg btn-block">Walnut Township</button> <hr> <li id="test" class="list-group-item"><i class="fa fa-bars fa-fw fa-lg"></i> Open Sidebar</li> <li class="list-group-item"><i class="fa fa-exchange fa-fw fa-lg"></i> Toggle Address Search</li> <li class="list-group-item"><img src="https://www.ovrdc.org/apps/assets/images/fullscreen-img.png" style="padding:0 1px;width:22px;" /> Fullscreen</li> <li class="list-group-item"><i class="fa fa-globe fa-fw fa-lg"></i> Default Map Extent</li> <li class="list-group-item"><i class="fa fa-map-marker fa-fw fa-lg"></i> Show/Follow Your Location</li> <li class="list-group-item"><i class="fa fa-cogs fa-fw fa-lg"></i> Toggle Map Tools (Mobile Only)</li> <li class="list-group-item"><img src="https://getbounds.com/assets/images/layers-bl.png" style="padding:0 1px;width:22px;" /> Toggle Map Layers</li> <hr> <h6>Pinch & zoom disabled. Use zoom controls.</h6> </div></div> </div>';

$(".twpselect").on('touchstart click', function(e){
	map.remove();
});

}

$(document).ready(function() {
	if (loaded == false) {
	console.log('document ready');
	makeMap();
	loaded = true;
	}
});
</script>
</body>
</html>
